# 날짜: 2025-03-21

## 딥다이브

### ERD가 데이터베이스 설계의 효율성을 높이는 이유
| 주요 요소         | 설명                                             |
|----------------|--------------------------------------------------|
| 구조적 명확성    | 테이블 간 관계를 시각화하여 전체적인 데이터 구조를 쉽게 파악 가능 |
| 중복 데이터 방지  |	정규화에 기초한 설계를 유도하여 중복 제거 및 저장 공간 절약     |
| 무결성 보장	    | 기본키, 외래키 등을 명확히 설정하여 데이터 정합성 확보         |
| 협업 효율성	    | 비개발자 및 다른 개발자와의 의사소통 도구로서의 역할 수행       |
| 유지보수 용이성 	| 문제 지점 파악, 수정 영향도 분석이 쉬움 → 빠른 대응 가능      |

---

### Index가 데이터베이스 쿼리 성능에 미치는 영향
- Index는 데이터 조회 속도를 높여 쿼리 성능을 크게 개선
- 과도한 사용 시 저장공간이 늘고 삽입·수정·삭제 시 인덱스 갱신 작업이 많아져 성능이 저하

---

### Transaction의 작동 원리, 데이터베이스 무결성을 보장하는 방법
- 원자성, 일관성, 고립성, 지속성
- ANSI SQL 표준은 네 가지 격리 수준을 정의

---

### NoSQL이 대규모 데이터 처리에서 선호되는 이유
- NoSQL은 분산 구조로 설계되어 있어, 서버를 추가함으로써 데이터를 손쉽게 분산 저장하고 처리
- 데이터에 정해진 스키마가 없어서, 다양한 형식의 데이터를 유연하게 처리
- Hadoop, Spart 등 분산처리 프레임워크와 연동이 쉽고, 실시간 로그 처리, 센서 데이터 수집 등에서 많이 활용

---

### 데이터베이스 동시성 제어가 여러 사용자의 작업 충돌을 방지하는 방식
#### 개념
- 유저가 많을수록, 여러 사용자가 동시에 트랜잭션을 할 수 있을 것이다
- 이 트랜잭션들에 순서를 부여하는 직렬화를 통해, 동시가 아니게 제어하는 것
- 그러나 엄격하게 제어할수록, 동시처리를 못해 느려지는 성능 Tradeoff가 존재

#### Pessimistic Protocol
- 비관적으로 충돌을 상정하며, RDBMS에서 주로 사용된다
- 락 방식에는 S-Lock, X-Lock, Intent Lock, Update Lock이 있다
- 제어 기술에는 Lock, 2PL, Deadlock detection 등이 있다

| 락 방식       | 설명                                                 |
|-------------|-----------------------------------------------------|
| S-Lock      | 여러 트랜잭션이 동시에 읽을 수 있도록 허용하지만, 쓰기 작업은 불가능 |
| X-Lock      | 읽기와 쓰기를 모두 차단하여 자원에 대한 독점적 접근 보장          |
| Intent Lock | 트랜잭션이 특정 자원을 사용할 의도가 있음을 명시적으로 나타냄       |
| Update Lock | 업데이트 작업을 위한 사전 예약을 통해 읽기 / 쓰기 충돌 방지       |

| 제어 기술                        | 설명                                            |
|--------------------------------|------------------------------------------------|
| Lock-based Concurrency Control | 트랜잭션들이 데이터베이스 자원을 안전하게 접근하도록 락을 관리 |
| 2PL (Two Phase Locking)        | 트랜잭션이 락을 획득하는 단계와 해제하는 단계를 구분        |
| Deadlock Detection             | 데드락 발생 시 이를 탐지하고 해소하기 위한 메커니즘        |

#### Optimistic Protocol
- 낙관적으로 충돌 없음을 상정하며, NoSQL에서 주로 사용된다
- 제어 기술에는 Timestamp, MVCC 등이 있다

| 제어 기술                                 | 설명                                                  |
|-----------------------------------------|------------------------------------------------------|
| Timestamp-based Concurrency Control     | 트랜잭션마다 타임스탬프를 부여하여 최신 데이터를 판별하고 충돌을 관리 |
| Multiversion Concurrency Control (MVCC) | 데이터의 여러 버전을 관리하여 전부 저장, 오래된 것들은 정리        |

---

### 데이터베이스 성능 최적화를 위한 확장 및 캐싱 전략
#### Scale-Out (수평적 확장)
- 서버를 추가로 설치하여, 여러 대의 서버가 요청을 처리
- 수평적 확장은 데이터의 정합성이 중요한 RDBMS에 적절하지 않음
- Clustering: 여러 개의 DB 서버가 하나의 스토리지를 나눠서 처리하는 방식
- Replication: 주 DB 서버와 그로부터 지속적으로 복제되는 보조 DB 서버를 가지는 방식
- Sharding: 대규모 데이터베이스를 샤드(shard)라고 부르는 작은 단위로 분할

#### Scale-Up (수직적 확장)
- 기존 서버의 성능을 높이는 방법
- 한 대의 서버에 부하가 집중되기 때문에 장애의 위험성 또한 커짐
- 수직적 확장은 데이터의 정합성이 중요한 RDBMS에 적절

#### 캐시 (Cache)
- 웹 서버가 데이터를 빠르게 제공하기 위해 자주 사용되는 정보를 임시로 저장

| 구분     | 로컬 캐시                        | 글로벌 캐시                                   |
|---------|-------------------------------|---------------------------------------------|
| 정의     | 각 서버 인스턴스에 독립적으로 존재     | 데이터의 일관성과 공유가 용이                      |
| 장점     | 데이터 접근 속도가 빠르다            | 여러 서버 인스턴스 간에 공유, 별도의 캐시 서버에서 관리 |
| 단점     | 각 서버가 독립적이라 데이터 일관성 문제 | 네트워크 지연의 가능성                           |

---

## 오늘의 회고
- 딥다이브를 평소보다 디테일하게 해서 좋았다
